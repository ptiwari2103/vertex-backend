<%- contentFor('title') %>View Member - Vertex Admin

<%- contentFor('style') %>
<style>
    .main-content {
       padding: 20px;
    }
    .welcome-section {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }
    .section-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        margin-bottom: 20px;
        padding: 20px;
    }
    .section-title {
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 10px;
        margin-bottom: 20px;
        color: #333;
    }
    .info-row {
        margin-bottom: 15px;
    }
    .info-label {
        font-weight: 600;
        color: #666;
    }
    .info-value {
        color: #333;
    }
    .document-image {
        max-width: 200px;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin: 10px 0;
    }
    .status-badge {
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 500;
    }
    .status-active {
        background-color: #d4edda;
        color: #155724;
    }
    .status-pending {
        background-color: #fff3cd;
        color: #856404;
    }
    .status-inactive {
        background-color: #f8d7da;
        color: #721c24;
    }
    .form-control-static {
        padding: 0.5rem 0.75rem;
        margin-bottom: 0;
        background-color: #f3f4f6;
        border: 1px solid #d1d5db;
        border-radius: 0.375rem;
        min-height: 38px;
        display: flex;
        align-items: center;
    }
</style>

<%- contentFor('body') %>
<div class="main-content">
    <div class="welcome-section">
        <div class="d-flex justify-content-between align-items-center">
            <h2 class="mb-0">Member Details</h2>
            <div>
                <a href="/members/allmembers" class="btn btn-secondary me-2">
                    <i class="bx bx-arrow-back"></i> Back to List
                </a>
                <a href="/members/edit/<%= member.id %>" class="btn btn-info">
                    <i class="bx bx-edit"></i> Edit
                </a>
            </div>
        </div>
    </div>

    <!-- Basic Information -->
    <div class="section-card">
        <h4 class="section-title">Basic Information</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="info-row">
                    <div class="info-label">User ID</div>
                    <div class="info-value"><%= member.user_id %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Account Number</div>
                    <div class="info-value"><%= member.account_number %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Name</div>
                    <div class="info-value"><%= member.name %></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="info-row">
                    <div class="info-label">Status</div>
                    <div class="info-value">
                        <span class="status-badge <%= member.status.toLowerCase() === 'active' ? 'status-active' : 
                            member.status.toLowerCase() === 'pending' ? 'status-pending' : 'status-inactive' %>">
                            <%= member.status %>
                        </span>
                    </div>
                </div>
                <div class="info-row">
                    <div class="info-label">Created Date</div>
                    <div class="info-value"><%= new Date(member.created_date).toLocaleDateString() %></div>
                </div>
            </div>
        </div>
    </div>

    <!-- KYC Information -->
    <div class="section-card">
        <h4 class="section-title">KYC Information</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="info-row">
                    <div class="info-label">KYC Status</div>
                    <div class="info-value">
                        <span class="status-badge <%= member.profile?.kyc_status?.toLowerCase() === 'approved' ? 'status-active' : 
                            member.profile?.kyc_status?.toLowerCase() === 'pending' ? 'status-pending' : 'status-inactive' %>">
                            <%= member.profile?.kyc_status || 'Not Submitted' %>
                        </span>
                    </div>
                </div>
                <div class="info-row">
                    <div class="info-label">PAN Number</div>
                    <div class="info-value"><%= member.profile?.pan_number || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Aadhar Number</div>
                    <div class="info-value"><%= member.profile?.aadhar_number || 'Not provided' %></div>
                </div>
            </div>
            <div class="col-md-6">
                <% if (member.profile?.pan_number_image) { %>
                    <div class="info-row">
                        <div class="info-label">PAN Card Image</div>
                        <img src="/<%= member.profile.pan_number_image %>" class="document-image" alt="PAN Card">
                    </div>
                <% } %>
                <% if (member.profile?.aadhar_number_image_front) { %>
                    <div class="info-row">
                        <div class="info-label">Aadhar Front Image</div>
                        <img src="/<%= member.profile.aadhar_number_image_front %>" class="document-image" alt="Aadhar Front">
                    </div>
                <% } %>
                <% if (member.profile?.aadhar_number_image_back) { %>
                    <div class="info-row">
                        <div class="info-label">Aadhar Back Image</div>
                        <img src="/<%= member.profile.aadhar_number_image_back %>" class="document-image" alt="Aadhar Back">
                    </div>
                <% } %>
            </div>
        </div>
    </div>

    <!-- Profile Information -->
    <div class="section-card">
        <h4 class="section-title">Profile Information</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="info-row">
                    <div class="info-label">Email</div>
                    <div class="info-value"><%= member.email_id || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Mobile</div>
                    <div class="info-value"><%= member.mobile_number || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Guardian Name</div>
                    <div class="info-value"><%= member.guardian_name || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Guardian Relation</div>
                    <div class="info-value"><%= member.guardian_relation || 'Not provided' %></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="info-row">
                    <div class="info-label">Nominee Name</div>
                    <div class="info-value"><%= member.profile?.nominee_name || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Nominee Relation</div>
                    <div class="info-value"><%= member.profile?.nominee_relation || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Nominee Contact</div>
                    <div class="info-value"><%= member.profile?.nominee_contact || 'Not provided' %></div>
                </div>
                <div class="info-row">
                    <div class="info-label">Nominee Email</div>
                    <div class="info-value"><%= member.profile?.nominee_email || 'Not provided' %></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Address Information -->
    <div class="section-card">
        <h4 class="section-title">Address Information</h4>
        <div id="addressList">
            <% member.userAddress.forEach((address, index) => { %>
                <div class="address-item mb-4 border rounded p-3">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="mb-0">Address #<%= index + 1 %></h5>
                        <span class="badge <%= address.status === 'Active' ? 'bg-success' : 'bg-secondary' %>">
                            <%= address.status %>
                        </span>
                    </div>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <h6>Permanent Address</h6>
                            <div class="mb-3">
                                <label class="form-label">Address</label>
                                <p class="form-control-static"><%= address.permanent_address %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">City</label>
                                <p class="form-control-static"><%= address.permanent_city %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">District</label>
                                <p class="form-control-static"><%= address.permanent_district %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">State</label>
                                <p class="form-control-static"><%= address.permanent_state %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Pincode</label>
                                <p class="form-control-static"><%= address.permanent_pincode %></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Correspondence Address</h6>
                            <div class="mb-3">
                                <label class="form-label">Address</label>
                                <p class="form-control-static"><%= address.correspondence_address %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">City</label>
                                <p class="form-control-static"><%= address.correspondence_city %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">District</label>
                                <p class="form-control-static"><%= address.correspondence_district %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">State</label>
                                <p class="form-control-static"><%= address.correspondence_state %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Pincode</label>
                                <p class="form-control-static"><%= address.correspondence_pincode %></p>
                            </div>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    </div>

    <!-- Bank Information -->
    <div class="section-card">
        <h4 class="section-title">Bank Information</h4>
        <div id="bankList">
            <% member.userBank.forEach((bank, index) => { %>
                <div class="bank-item mb-4 border rounded p-3">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="mb-0">Bank Account #<%= index + 1 %></h5>
                        <span class="badge <%= bank.status === 'Active' ? 'bg-success' : 'bg-secondary' %>">
                            <%= bank.status %>
                        </span>
                    </div>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Bank Name</label>
                                <p class="form-control-static"><%= bank.bank_name %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Branch Name</label>
                                <p class="form-control-static"><%= bank.branch_name %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Account Number</label>
                                <p class="form-control-static"><%= bank.account_number %></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">IFSC Code</label>
                                <p class="form-control-static"><%= bank.ifsc_code %></p>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Account Type</label>
                                <p class="form-control-static"><%= bank.account_type %></p>
                            </div>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    </div>
</div>
